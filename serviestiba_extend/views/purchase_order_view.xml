<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="serviestiba_purchase_order_form_inherit" model="ir.ui.view">
		<field name="name">serviestiba.purchase.order.form.inherit</field>
		<field name="model">purchase.order</field>
		<field name="inherit_id" ref="purchase.purchase_order_form" />
		<field name="arch" type="xml">
			<xpath expr="//button[@name='print_quotation']" position="after">
				<button name="action_purchase_reviewed" string="Reviewed" type="object" states="sent" class="btn btn-primary"/>
				<button name="action_purchase_preapprove" string="Pre Approve" type="object" states="reviewed" class="btn btn-primary"/>
				<button name="button_approve" type="object" states="preapprove" string="Approve Order" class="oe_highlight" data-hotkey="z"/>
			</xpath>
			<xpath expr="//button[@name='button_cancel']" position="replace">
				<button name="button_cancel" states="draft,to approve,sent,purchase,reviewed,preapprove" string="Cancel" type="object" data-hotkey="x" />
			</xpath>
		</field>
	</record>
	<record id="serviestiba_sh_purchase_agreement_form_view" model="ir.ui.view">
		<field name="name">serviestiba.sh.purchase.agreement.form.view</field>
		<field name="model">purchase.agreement</field>
		<field name="inherit_id" ref="sh_all_in_one_tender_bundle.sh_purchase_agreement_form_view"/>
		<field name="arch" type="xml">
			<xpath expr="//field[@name='sh_agreement_deadline']" position="replace">
				<field name="sh_agreement_deadline" readonly="1"/>
			</xpath>
		</field>
	</record>
	<record id="group_pre_approve_quote_manager" model="res.groups">
		<field name="name">Pre Aprobar</field>
	</record>
	<record id="group_approve_quote_manager" model="res.groups">
		<field name="name">Aprobar</field>
	</record>
	<record id="action_server_approve_quote" model="ir.actions.server">
		<field name="name">Aprobar</field>
		<field name="groups_id" eval="[(4, ref('serviestiba_extend.group_approve_quote_manager'))]"/>
		<field name="model_id" ref="serviestiba_extend.model_purchase_order"/>
		<field name="binding_model_id" ref="serviestiba_extend.model_purchase_order"/>
		<field name="binding_view_types">list</field>
		<field name="state">code</field>
		<field name="code">                if records:                    action = records.button_approve()            </field>
	</record>
	<record id="action_server_pre_approve_quote" model="ir.actions.server">
		<field name="name">Pre Aprobar</field>
		<field name="groups_id" eval="[(4, ref('serviestiba_extend.group_pre_approve_quote_manager'))]"/>
		<field name="model_id" ref="serviestiba_extend.model_purchase_order"/>
		<field name="binding_model_id" ref="serviestiba_extend.model_purchase_order"/>
		<field name="binding_view_types">list</field>
		<field name="state">code</field>
		<field name="code">                if records:                    action = records.action_purchase_preapprove()            </field>
	</record>
	<record model="ir.ui.view" id="view_purchase_agreement_pivot">
		<field name="name">purchase.agreement.pivot</field>
		<field name="model">purchase.agreement</field>
		<field name="arch" type="xml">
			<pivot string="Licitaciones" display_quantity="1" sample="1">
				<field name="x_studio_periodo" type="row"/>
				<field name="sh_purchase_user_id" type="row"/>
				<field name="sh_agreement_type" type="row"/>
				<field name="sh_order_date" type="row"/>
				<field name="x_studio_periodo" type="row"/>
				<field name="state" type="row"/>
			</pivot>
		</field>
	</record>
	<record id="serviestiba_sh_purchase_agreement_action" model="ir.actions.act_window">
		<field name="name">Licitaciones</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">purchase.agreement</field>
		<field name="view_mode">pivot</field>
		<field name="help" type="html">
			<p class="oe_view_nocontent_create">                Click to Create New Purchase Tender.            </p>
		</field>
	</record>
	<menuitem id="serviestiba_sh_purchase_agreement_menu" name="Licitaciones" parent="purchase.purchase_report_main" action="serviestiba_sh_purchase_agreement_action" />
</odoo>